import{r as a,j as e,a as g}from"./index-B8oZa9HQ.js";const u={mode:"default",message:"Stay focused! You can do it.",backgroundColor:"#ffffff",redirectDelay:3},f={blocked:{label:"Blocked",color:"bg-red-100 text-red-700"},limit:{label:"Daily Limit Reached",color:"bg-orange-100 text-orange-700"},schedule:{label:"Blocked by Schedule",color:"bg-blue-100 text-blue-700"},focus:{label:"Focus Session Active",color:"bg-purple-100 text-purple-700"}};function j(){const[s,r]=a.useState(0);a.useEffect(()=>{const i=()=>{const d=new Date,l=new Date(d);l.setHours(24,0,0,0),r(Math.round((l.getTime()-d.getTime())/1e3))};i();const m=setInterval(i,1e3);return()=>clearInterval(m)},[]);const o=Math.floor(s/3600),n=Math.floor(s%3600/60),t=s%60;return e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Resets in ",e.jsxs("span",{className:"font-mono font-semibold text-gray-600",children:[o,"h ",n,"m ",t,"s"]})]})}function y({site:s,isPreview:r}){const[o,n]=a.useState(!1),[t,i]=a.useState(0),m=()=>{r||chrome.runtime.sendMessage({type:"TEMPORARY_ALLOW",domain:s,minutes:5},()=>{n(!0),i(5);const d=Date.now(),l=setInterval(()=>{const c=Math.max(0,5-Math.floor((Date.now()-d)/6e4));i(c),c===0&&(clearInterval(l),window.history.back())},1e4);setTimeout(()=>window.history.back(),200)})};return o?e.jsxs("p",{className:"text-sm text-green-600 mt-2",children:["✓ Allowed for 5 min (",t," min left)"]}):e.jsx("button",{onClick:m,className:"mt-3 px-4 py-1.5 rounded-lg border border-gray-300 text-sm text-gray-600 hover:bg-gray-100 transition-colors",children:"Allow for 5 minutes"})}function w(){const s=new URLSearchParams(window.location.search),r=decodeURIComponent(s.get("site")??"this site"),o=s.get("reason")??"blocked",n=s.get("preview")==="1",[t,i]=a.useState(u),[m,d]=a.useState(null);a.useEffect(()=>{chrome.storage.local.get("customBlockPage",c=>{c.customBlockPage&&i({...u,...c.customBlockPage})})},[]),a.useEffect(()=>{if(t.mode!=="redirect"||!t.redirectUrl||n)return;const c=t.redirectDelay??3;d(c);let x=c;const h=setInterval(()=>{x-=1,d(x),x<=0&&(clearInterval(h),window.location.href=t.redirectUrl)},1e3);return()=>clearInterval(h)},[t.mode,t.redirectUrl,t.redirectDelay,n]);const l=f[o]??f.blocked;return t.mode==="default"||!t.mode?e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-b from-red-50 to-white font-sans",children:[e.jsx("div",{className:"w-20 h-20 bg-primary-500 rounded-full flex items-center justify-center mb-6 shadow-lg",children:e.jsx("svg",{className:"w-10 h-10 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2L3 7v7c0 5.25 3.75 10.15 9 11.35C17.25 24.15 21 19.25 21 14V7l-9-5z"})})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Site Blocked"}),e.jsx("p",{className:"text-gray-500 text-sm mb-4",children:r}),e.jsx("span",{className:`badge text-sm px-3 py-1 ${l.color}`,children:l.label}),e.jsx(p,{reason:o}),o==="limit"&&e.jsx(j,{}),e.jsxs("div",{className:"flex flex-col items-center gap-2 mt-8",children:[e.jsx("button",{onClick:()=>window.history.back(),className:"btn-secondary",children:"← Go Back"}),(o==="blocked"||o==="limit")&&!n&&e.jsx(y,{site:r,isPreview:n})]}),n&&e.jsx("p",{className:"mt-4 text-xs text-gray-400",children:"Preview mode"})]}):t.mode==="motivational"?e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-blue-600 to-purple-700 font-sans text-white text-center px-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-600 to-purple-700 rounded-full flex items-center justify-center mb-6",children:e.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h2",{className:"text-2xl font-bold mb-3",children:t.message||"Stay focused!"}),e.jsxs("p",{className:"text-blue-200 mb-2 text-sm",children:[r," is blocked"]}),e.jsx("span",{className:"badge text-sm px-3 py-1 bg-white/20 text-white",children:l.label}),e.jsx("button",{onClick:()=>window.history.back(),className:"mt-8 btn-secondary bg-white/10 border-white/20 text-white hover:bg-white/20",children:"← Go Back"})]}):t.mode==="minimalist"?e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center font-sans text-center",children:[e.jsx("p",{className:"text-4xl font-light text-gray-300 mb-2",children:"Blocked"}),e.jsx("p",{className:"text-gray-400 text-sm",children:r}),e.jsx("button",{onClick:()=>window.history.back(),className:"mt-8 text-xs text-gray-400 hover:text-gray-600",children:"Go Back"})]}):t.mode==="meme"?e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-yellow-50 font-sans text-center px-6",children:[e.jsx("svg",{className:"w-16 h-16 text-yellow-500 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Not today!"}),e.jsx("p",{className:"text-gray-500 mb-1",children:r}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Back to work!"}),e.jsx("button",{onClick:()=>window.history.back(),className:"mt-8 btn-secondary",children:"← Go Back"})]}):t.mode==="redirect"?e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-green-50 font-sans text-center px-6",children:[e.jsx("svg",{className:"w-14 h-14 text-green-500 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Redirecting you…"}),e.jsxs("p",{className:"text-sm text-gray-500 mb-1",children:[r," is blocked"]}),t.redirectUrl&&e.jsx("p",{className:"text-green-600 text-sm break-all",children:t.redirectUrl}),m!==null&&e.jsx("p",{className:"text-2xl font-bold text-green-600 mt-4",children:m}),n&&e.jsx("p",{className:"mt-4 text-xs text-gray-400",children:"Preview — redirect disabled"})]}):e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center font-sans text-center px-6",style:{background:t.imageBase64?`url(${t.imageBase64}) center/cover no-repeat`:t.backgroundColor??"#fff"},children:e.jsxs("div",{className:"bg-white/80 dark:bg-black/50 backdrop-blur-sm rounded-2xl px-8 py-10 max-w-sm",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:t.message||"Site Blocked"}),e.jsx("p",{className:"text-gray-500 text-sm",children:r}),e.jsx("button",{onClick:()=>window.history.back(),className:"mt-6 btn-secondary",children:"← Go Back"})]})})}function p({reason:s}){return s==="limit"?e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"You've reached your daily limit. It resets at midnight."}):s==="schedule"?e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"This site is blocked during your scheduled hours."}):s==="focus"?e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"A focus session is active. Hang in there!"}):null}const b=document.getElementById("root");b&&g(b).render(e.jsx(w,{}));
